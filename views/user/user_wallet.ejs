<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<!-- Include SweetAlert CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@10/dist/sweetalert2.min.css">
<!-- Add this to your HTML -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" integrity="...">

<!-- Bootstrap JavaScript and dependencies -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="..."></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js" integrity="..."></script>


<!-- Your other HTML head content -->

<!-- Include SweetAlert JS -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<!-- Add these lines in the head section of your HTML file -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
crossorigin="anonymous" referrerpolicy="no-referrer" />

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script src="https://code.jquery.com/jquery-3.7.0.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
crossorigin="anonymous"></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

<!-- SweetAlert2 -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
<%- include('../partials/user-header.ejs') %>
<div class="container" style="margin-top: 8%;">
    <div class="row">
      <div class="col-md-6 mx-auto">
        <div class="userWallet px-4 card add-btn d-flex flex-column align-items-center justify-content-center"style="background-color:#D3DBEE">
            <p class="text-danger mt-2 text-center" style="font-size: 20px; font-weight: bold;">
                Hello, <%= user.name %>
              </p>
              
          <p class="text-danger mt-2 text-center">My Wallet</p>
          <i class="fa-solid text-warning fa-2x fa-money-check-dollar"></i>
          <% if (user.user_wallet > 0) { %>
            <div class="h3 fw-bold text-success">₹<%= user.user_wallet %>.00</div>
          <% } else { %>
            <div class="h3 fw-bold text-danger">Wallet Empty</div>
          <% } %>
        </div>
      </div>
    </div>
  
    <% function toDateAndTime(date) { %>
      <% const formattedDate = new Date(date).toLocaleString(); %>
      <% return formattedDate; %>
    <% } %>
  
    <div class="row mt-3">
      <div class="col-md-6 mx-auto">
        <div class="card">
          <div class="card-header text-center">
            <h5 class="mb-0">
              <button class="btn btn-link btn-stylish" data-toggle="collapse" data-target="#walletHistory" aria-expanded="false" aria-controls="walletHistory"style="background-color:#D3DBEE">
                <span class="history-icon">&#128197;</span> Wallet History
              </button>
              <style>
                .btn-stylish {
                  color: #4CAF50; /* Green color */
                  font-weight: bold;
                  font-size: 18px;
                }
  
                .history-icon {
                  margin-right: 5px;
                  font-size: 20px;
                }
  
              </style>
            </h5>
          </div>
  
          <div id="walletHistory" class="collapse">
            <div class="card-body" style="height: 400px; overflow-y:scroll;">
              <div class="card-title h5 mt-2 user-text text-center fw-bold">Wallet History</div>
              <div class="bg-secondary" style="height: 2px;"></div>
              <% if (user.wallet_history.length > 0) { %>
                <% user.wallet_history.forEach(history => { %>
                  <div class="card bg-light mt-2 d-flex flex-row justify-content-between align-items-center">
                    <div class="fw-normal"><%= toDateAndTime(history.time) %></div>
                    <% if (history.status) { %>
                      <div class="fw-bold text-danger"><%= history.status %></div>
                      <div class="fw-bold text-danger">₹<%= history.amount %></div>
                    <% } else { %>
                      <div class="fw-bold text-success"><%= history.status %></div>
                      <div class="fw-bold text-success">₹<%= history.amount %></div>
                    <% } %>
                  </div>
                <% }); %>
              <% } else { %>
                <div class="alert alert-info text-center mt-3" role="alert">
                  Wallet history is empty.
                </div>
              <% } %>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  